<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <base href="/presentations/slides/vue-those-things/">
  <title>Vue开发那些事</title>
  <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../../reveal.js/css/reveal.css">
  <link rel="stylesheet" href="../../reveal.js/css/theme/league.css" id="theme">
  <!-- Theme used for syntax highlighting of code -->
  <link rel="stylesheet" href="../../reveal.js/lib/css/zenburn.css">
  <link rel="stylesheet" href="../../app/css/common.css">
  <link rel="stylesheet" href="index.css">
</head>

<body>
  <div class="reveal">
    <div class="slides">
      <!-- section1 个人介绍 -->
      <section class="section1">
        <section>
          <h2 class="nf">
            <img class="vue-logo" src="images/vue_logo.svg" alt="">
            <br> Vue 开发那些事
          </h2>
          <p> 胡敏&nbsp;
            <a href="http://nesc.newegg.com.cn/" target="_blank">@新蛋科技</a>
          </p>
        </section>
        <section>
          <h2 class="ms-font">About me</h2>
          <ul>
            <li class="fragment">两年半偏后端开发，三年半偏前开发</li>
            <li class="fragment">不玩 weibo、知乎，不太喜欢微信的开发者</li>
            <li class="fragment">喜欢挖坑埋自己的开源爱好者</li>
            <li class="fragment">不太靠谱的 Vue 用户</li>
            <li class="fragment">Github：
              <a href="https://github.com/hstarorg" target="_blank">hstarorg</a>
            </li>
            <li class="fragment">博客园：
              <a href="http://www.cnblogs.com/humin/" target="_blank">幻天芒</a>
            </li>
            <li class="fragment">邮&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;箱：
              <a href="mailto:hm910705@163.com">hm910705@163.com</a>
            </li>
          </ul>
          <img class="fragment avatar" src="https://avatars0.githubusercontent.com/u/4043284?s=460&v=4" alt="avatar">
        </section>
      </section>

      <!-- section2 大纲 -->
      <section class="section2">
        <section>
          <ul>
            <li class="fragment">我认识的 Vue </li>
            <li class="fragment">Vue 项目结构&全家桶 </li>
            <li class="fragment">应用迁移之路</li>
            <li class="fragment">一些小Case</li>
          </ul>
        </section>
      </section>

      <!-- section3 我认识的Vue -->
      <section class="section3">
        <section>
          <h2>我认识的 Vue</h2>
        </section>
        <section>
          <ul class="ul-inline full-width text-center">
            <li>
              <p>2015</p>
              <ul class="no-list-style">
                <li class="font-20 fragment">2015年底，初遇 Vue</li>
                <li class="font-20 fragment">Vue，一个 Angular.js 的模仿者？</li>
                <li class="font-20 fragment">
                  <div class="tag-container">
                    <span>新奇的玩具</span>
                    <span>双向绑定库</span>
                    <span>VS. Avalon？</span>
                  </div>
                </li>
              </ul>
            </li>
            <li class="fragment">
              <p>2016</p>
              <ul class="no-list-style">
                <li class="font-20 fragment">2016年6月，V1.0 已经发布一段时间了，是时候去踩一波了</li>
                <li class="font-20 fragment">
                  <img src="images/1.jpg" alt="">
                </li>
                <li class="font-20 fragment">
                  <div class="tag-container">
                    <span>有搞头</span>
                    <span>易用、灵活</span>
                    <span>生态圈壮大...</span>
                  </div>
                </li>
              </ul>
            </li>
            <li class="fragment">
              <p>2017</p>
              <ul class="no-list-style">
                <li class="font-20 fragment">16 ~ 17，成长已势不可挡</li>
                <li class="font-20 fragment">Now，为时不晚</li>
                <li class="font-20 fragment">
                  <div class="tag-container">
                    <span>顶级框架</span>
                    <span>三分天下</span>
                    <span>中庸 - 微创新</span>
                  </div>
                </li>
              </ul>
            </li>
          </ul>
        </section>
      </section>
      <section class="section3-1">
        <section>
          <h3>
            <span class="text-primary">Vue</span>
            <small>or</small>
            <span class="text-primary">Angular</span>
            <small>or</small>
            <span class="text-primary">React</span>
          </h3>
        </section>
        <section>
          <ul class="ul-inline full-width text-center">
            <li>
              <p>Vue</p>
              <ul class="no-list-style">
                <li class="font-20 fragment">
                  1、
                  <span class="text-danger" style="text-decoration: line-through;">轻量级 UI 库</span> 渐进式框架</li>
                <li class="font-20 fragment">2、多种使用方式，适应性强</li>
                <li class="font-20 fragment">3、高效变更检测，虚拟DOM，默认性能优化</li>
                <li class="font-20 fragment">4、单文件组件，灵活的文件组织方式</li>
                <li class="font-20 fragment">5、强大易用的 cli 工具（vue-cli）</li>
                <li class="font-20 fragment">6、大型项目实践相对较少</li>
                <li class="font-20 fragment">7、对 ES Next、TypeScript 支持较别扭</li>
              </ul>
            </li>
            <li class="fragment">
              <p>Angular</p>
              <ul class="no-list-style">
                <li class="font-20 fragment">1、Google 背书，有 Angular.js 的成功经验</li>
                <li class="font-20 fragment">2、面向未来，原生TS支持</li>
                <li class="font-20 fragment">3、完善全家桶，开箱即用，适合偏后端系统</li>
                <li class="font-20 fragment">4、复杂度高（纯业务开发简单），基本强制TS</li>
                <li class="font-20 fragment">5、体积相对大</li>
                <li class="font-20 fragment">6、易用性相对差一些，高大上但少些亲和性</li>
              </ul>
            </li>
            <li class="fragment">
              <p>React</p>
              <ul class="no-list-style">
                <li class="font-20 fragment">1、小巧，灵活，思维的创新</li>
                <li class="font-20 fragment">2、专注UI层，协力构建生态</li>
                <li class="font-20 fragment">3、拥抱 ES Next，工具链齐全</li>
                <li class="font-20 fragment">4、JSX 是把双刃剑</li>
                <li class="font-20 fragment">5、React Native</li>
              </ul>
            </li>
          </ul>
          <p class="fragment text-primary">没有最好的，只有最合适的！强扭的瓜不甜！</p>
        </section>
      </section>
      <section class="section3-2">
        <section>
          <h3>
            当你会Vue，我会认为...
          </h3>
          <img class="fragment" src="images/vue-tech-map.png" alt="">
        </section>
      </section>

      <!-- section4 Vue 项目结构&全家桶 -->
      <section class="section4">
        <section>
          <h2>Vue 项目结构&全家桶</h2>
        </section>
        <section>
          <ul class="no-list-style">
            <li class="">1、如何来规划一个项目的目录结构？</li>
            <li class="fragment">2、何时，我们该引入 Vue全家桶？</li>
          </ul>
        </section>
      </section>
      <section class="section4-1">
        <section>
          <h3>目录划分我之见</h3>
        </section>
        <section>
          <h4>通用项目层次</h4>
          <img src="images/project-structure.png" alt="">
        </section>
        <section>
          <h4>目录结构进化</h4>
          <ul class="ul-inline col-3">
            <li class="fragment">
              <img src="images/folder1.png" alt="">
            </li>
            <li class="fragment" style="text-align:center;">
              <h2>-></h2>
            </li>
            <li class="fragment">
              <img src="images/folder2.jpg" alt="">
            </li>
          </ul>
        </section>
        <section>
          <h4>插件/组件库目录结构</h4>
          <ul class="ul-inline">
            <li class="pull-left" style="width: 30%;">
              <img src="images/folder2-1.jpg" alt="">
            </li>
            <li class="pull-left" style="width: 70%;">
              <ul class="no-list-style font-20">
                <li class="fragment">1、具有业务无关性</li>
                <li class="fragment">2、跨项目共享</li>
                <li class="fragment">3、Maybe 开源？</li>
                <li class="fragment">4、开发一个组件库：
                  <pre><code class="hljs" data-trim>
                      // index.js content
                      import { COMPONENTS } from './components';

                      const install = Vue => {
                        if (install.installed) return;
                        install.installed = true;
                        COMPONENTS.forEach(comp => {
                          Vue.component(comp.name, comp);
                        });
                      };

                      // Auto install
                      if (typeof window !== 'undefined' && window.Vue) {
                        install(window.Vue);
                      };

                      export default {
                        install,
                        version: '0.0.1'
                      };
                      </code></pre>
                </li>
              </ul>
            </li>
          </ul>
        </section>
        <section>
          <h4>常规项目目录结构</h4>
          <ul class="ul-inline">
            <li class="pull-left" style="width: 30%;">
              <img src="images/folder2-2.jpg" alt="">
            </li>
            <li class="pull-left" style="width: 70%;">
              <ul class="no-list-style font-20">
                <li class="fragment">1、组件</li>
                <li class="fragment">2、页面</li>
                <li class="fragment">3、Filters & Utils</li>
                <li class="fragment">4、动态加载页面/组件：
                  <pre><code class="hljs" data-trim>
                        import App from './app/App';

                        // import Home from './home/Home';
                        // import About from './about/About';
                        // import Layout from './layout/Layout';
                        // import NotFound from './notfound/NotFound';


                        const Layout = () => import('./layout/Layout');
                        const Home = () => import('./home/Home');
                        const About = () => import('./about/About');
                        const NotFound = () => import('./notfound/NotFound');

                        export {
                          App,
                          Home,
                          About,
                          NotFound,
                          Layout
                        };

                    </code></pre>
                </li>
              </ul>
            </li>
          </ul>
        </section>
        <section>
          <h4>复杂项目目录，拆分模块</h4>
          <ul class="ul-inline">
            <li class="pull-left" style="width: 30%;">
              <img src="images/folder2-3.jpg" alt="">
            </li>
            <li class="pull-left" style="width: 70%;">
              <ul class="no-list-style font-20">
                <li class="fragment">1、项目模块化</li>
                <li class="fragment">2、每个模块类似一个简单项目</li>
                <li class="fragment">3、统一导出</li>
                <li class="fragment">
                  <pre><code data-trim>
                      // modules/product/pages/index.js
                      const Page21 = () => import(/* webpackChunkName: "product" */'./page21/Page21');
                      const Page22 = () => import(/* webpackChunkName: "product" */'./page22/Page22');
                      const Layout = () => import(/* webpackChunkName: "product" */'./layout/Layout');

                      export {
                        Layout,
                        Page21,
                        Page22
                      };

                      // modules/product/index.js
                      import * as pages from './pages';

                      export default {
                        path: 'product', component: pages.Layout, children: [
                          { path: 'page21', component: pages.Page21 },
                          { path: 'page22', component: pages.Page22 }
                        ]
                      };


                      // modules/index.js
                      import userRotue from './user';
                      import productRoute from './product';

                      export const moduleRoutes = [
                        userRotue,
                        productRoute
                      ];
                    </code></pre>
                </li>
              </ul>
            </li>
          </ul>
        </section>
        <section>
          <h4>最后：粘合剂</h4>
          <pre class="fragment"><code class="hljs" data-trim>
            import Vue from 'vue';
            import VueRouter from 'vue-router';
            Vue.use(VueRouter);

            import * as pages from './pages';
            import { moduleRoutes } from './modules';

            const routes = [
              {
                path: '', component: pages.Layout, children: [
                  { path: '', component: pages.Home },
                  { path: 'about', component: pages.About },
                  ...moduleRoutes
                ]
              },
              { path: '*', component: pages.NotFound }
            ];

            export const router = new VueRouter({
              routes
            });
            </code></pre>
        </section>
      </section>
      <section class="section4-2">
        <section>
          <h3>引入全家桶</h3>
          <img class="fragment" src="images/vue-all.png" alt="">
        </section>
        <section>
          <h3>Vue-Router</h3>
          <ul class="no-list-style font-20">
            <li class="fragment">1、什么是路由？</li>
            <li class="fragment">2、什么是客户端路由？</li>
            <li class="fragment">
              <img src="images/router.png" alt="" style="width: 80%;">
            </li>
            <li class="fragment">
              <strong class="text-danger">除非不是开发SPA，否则越早越好！</strong>
            </li>
            <li class="fragment">还有其他路由选择么？
              <strong class="fragment text-danger">有！</strong>
              <strong class="fragment text-danger">But why？</strong>
            </li>
          </ul>
        </section>
        <section>
          <h3>Vuex</h3>
          <ul class="ul-inline col-2">
            <li class="fragment">
              <img src="images/vuex-flow.png" alt="">
            </li>
            <li class="fragment">
              <img src="images/vuex.png" alt="">
            </li>
          </ul>
        </section>
        <section>
          <ul class="no-list-style">
            <li class="fragment">1、当你不清楚 Vuex 有什么用时，请不要使用它！</li>
            <li class="fragment">2、当你没有状态共享时，不必使用它！</li>
            <li class="fragment">3、/(ㄒoㄒ)/~~，编不下去了，我不太喜欢重用 Vuex！</li>
            <li class="fragment">
              <strong class="text-danger">当你觉得需要Vuex了，再来引入吧！
                <span class="fragment">自然而然！</span>
              </strong>
            </li>
          </ul>
        </section>
      </section>

      <!-- section5 迁移之路 -->
      <section class="section5">
        <section>
          <h2>应用迁移之路</h2>
        </section>
        <section>
          <h3>Why?</h3>
          <ul class="no-list-style">
            <li class="fragment">1、或多或少，我们都可能会有些旧项目改造升级</li>
            <li class="fragment">2、选MV*？
              <span class="fragment">Angular?</span>
              <span class="fragment">React?</span>
              <span class="fragment text-danger">Vue.js</span>
            </li>
            <li class="fragment">3、整体迁移，一步到位！
              <span class="fragment text-danger">现实么？</span>
            </li>
            <li class="fragment">更好的迁移之路是？
              <span class="fragment text-danger">页面级别的迁移！</span>
            </li>
          </ul>
        </section>
        <section>
          <h3>单页迁移（Angular.JS）</h3>
          <ul class="no-list-style ul-inline">
            <li class="pull-left" style="width:30%;">
              <img src="images/angularjs-1.jpg" alt="">
            </li>
            <li class="pull-left" style="width:70%;">
              <pre><code class="hljs" data-trim>
               // app.js
               const basePath = 'src';
               angular.module('app', ['ngRoute'])
                 .config(['$routeProvider', '$locationProvider', ($routeProvider, $locationProvider) => {
                   $locationProvider.html5Mode(true);
                   $routeProvider
                     .when('/', {
                       controller: 'HomeCtrl',
                       controllerAs: 'vm',
                       templateUrl: `${basePath}/pages/home/home.html`
                     })
                     .when('/about', {
                       controller: 'AboutCtrl',
                       controllerAs: 'vm',
                       templateUrl: `${basePath}/pages/about/about.html`
                     })
                 }]);

               // home.controller.js
               (() => {
                class HomeCtrl {
                  constructor() {
                    this.hello = 'I\'m Home Page';
                  }
                }
                angular.module('app')
                  .controller('HomeCtrl', HomeCtrl);
              })();

               // index.js
               import './src/app';
               import './src/pages/home/home.controller';
               import './src/pages/about/about.controller';
               import './src/bootstrap';

               // webpack.config.js
               const path = require('path');
               module.exports = {
                 entry: {
                   app: './index.js'
                 },
                 output: {
                   path: path.join(__dirname, './dist'),
                   filename: 'js/[name].js'
                 },
                 module: {
                   rules: [{
                     test: /.js$/,
                     loader: 'babel-loader'
                   }]
                 }
               };
              </code></pre>
            </li>
          </ul>
        </section>
        <section>
          <h3>引入Vue</h3>
          <ul class="no-list-style ul-inline">
            <li class="fragment pull-left" style="width:30%;">
              <img src="images/angularjs-2.jpg" alt="">
            </li>
            <li class="pull-left" style="width:70%;">
              <img class="fragment" src="images/angularjs-3.jpg" alt="">
              <br>
              <img class="fragment" src="images/angularjs-4.jpg" alt="">
            </li>
          </ul>
        </section>
        <section>
          <h3 class="text-danger">以上都是乱写的！</h4>
        </section>
      </section>

      <!-- section6 Vue常见问题解析 -->
      <section class="section6">
        <section>
          <h2>一些小Case</h2>
        </section>
        <section>
          <h4>Q1：为啥我修改了数据，UI不刷新？</h4>
          <pre class="fragment"><code class="hljs" data-trim>
            <template>
              <div class="page-app">
                Show a random string:
                <strong>{{user.rnd}}</strong>
                <hr>
                <button @click="setUserName">Set Name</button>
              </div>
            </template>
            &lt;script>
              export default {
                data() {
                  return {
                    user: {}
                  };
                },
                methods: {
                  setUserName() {
                    this.user.rnd = Math.random().toString(16);
                  }
                }
              };
            &lt;/script>
          </code></pre>
        </section>
        <section>
          <h4>How?</h4>
          <div class="row">
            <div class="col-xs-4">
              <img src="images/ob-1.jpg" alt="" class="fragment">
            </div>
            <div class="col-xs-4">
              <img src="images/ob-2.jpg" alt="" class="fragment">
            </div>
            <div class="col-xs-4">
              <img src="images/ob-3.jpg" alt="" class="fragment">
            </div>
          </div>
          <div class="row">
            <div class="col-xs-6">
              <img src="images/ob-4.jpg" alt="" class="fragment">
            </div>
            <div class="col-xs-6">
              <img src="images/ob-5.jpg" alt="" class="fragment">
            </div>
          </div>
        </section>
        <section>
          <h4>Why?</h4>
          <div class="fragment">
            <pre><code class="hljs" data-trim>
                var user = {};
                user.name = 'XXX';
                </code></pre>
          </div>
          <div class="fragment">
            <pre><code class="hljs" data-trim>
                function defineReactive(obj, key, value) {
                  var property = Object.getOwnPropertyDescriptor(obj, key);
                  var getter = property && property.get;
                  var setter = property && property.set;
                  Object.defineProperty(obj, key, {
                    configurable: true,
                    enumerable: true,
                    get() {
                      return getter ? getter.call(obj) : value;
                    },
                    set(newVal) {
                      // 先取出当前值
                      var val = getter ? getter.call(obj) : value;
                      // 值一样，直接return
                      if (newVal === val || (newVal !== newVal && val !== val)) {
                        return;
                      }
                      // 把值设置回去
                      if (setter) {
                        setter.call(obj, newVal);
                      } else {
                        value = newVal;
                      }
                      console.log('我被改变了');
                      // todo: 这里可以发布通知
                    }
                  })
                }
                var user = {};
                defineReactive(user, 'name', 'abc');
              </code></pre>
          </div>
        </section>
        <section>
          <h4>Q2：多个组件之间数据如何传递？</h4>
        </section>
        <section>
          <h4>Q3：使用Vuex时，如何处理刷新数据丢失？</h4>
        </section>
      </section>

      <!-- section7 The end -->
      <section class="section7">
        <section>
          <h2>Q & A</h2>
        </section>
        <section>
          <h2>The end!</h2>
          <h4 class="text-danger">Thank you!</h4>
        </section>
      </section>

      <!-- section7 公司招聘 -->
      <section class="section8">
        <section>
          <h2>End 之后</h2>
        </section>
      </section>
    </div>
  </div>

  <script src="../../reveal.js/lib/js/head.min.js"></script>
  <script src="../../reveal.js/js/reveal.js"></script>

  <script src="index.js"></script>
</body>

</html>
